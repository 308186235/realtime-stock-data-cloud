<template>
	<view class="container">
		<!-- æ ‡é¢˜åŠæ¬¢è¿ä¿¡æ¯ -->
		<view class="header">
			<text class="main-title">è‚¡ç¥¨äº¤æ˜“ç³»ç»Ÿ</text>
			<text class="subtitle">AIé©±åŠ¨çš„æ™ºèƒ½äº¤æ˜“å¹³å°</text>
		</view>
		
		<!-- å¸‚åœºæ¦‚è§ˆ Section -->
		<view class="section">
			<view class="section-header">
				<text class="section-title">å¸‚åœºæ¦‚è§ˆ</text>
				<text class="refresh-btn" @click="refreshMarketData">åˆ·æ–°</text>
			</view>
			<view class="market-indices">
				<!-- ç¡¬ç¼–ç å¸‚åœºæŒ‡æ•°æ•°æ® -->
				<view class="index-card">
					<view class="index-header">
						<text class="index-name">ä¸Šè¯æŒ‡æ•°</text>
						<text class="index-value">3,258.63</text>
						<text class="index-change increase">+0.56%</text>
					</view>
					<view class="strategy-tip" @click="toggleStrategy('shanghai')">
						<text class="tip-icon">â„¹ï¸</text>
						<text class="tip-text">é˜²å¾¡ç­–ç•¥è¯´æ˜</text>
					</view>
					<view v-if="expandedStrategy === 'shanghai'" class="strategy-detail">
						<text class="strategy-text">â€¢ ä¸»åŠ›èµ„é‡‘3æ—¥å‡€æµå‡ºè¶…5%è‡ªåŠ¨å‡æŒ\nâ€¢ æ³¢åŠ¨ç‡çªç ´å¸ƒæ—å¸¦ä¸Šè½¨è§¦å‘é¢„è­¦\nâ€¢ å¤§å®—äº¤æ˜“å¼‚å¸¸åŒæ­¥å¯åŠ¨åæ“çºµç­–ç•¥</text>
					</view>
				</view>
				<view class="index-card">
					<text class="index-name">æ·±è¯æˆæŒ‡</text>
					<text class="index-value">10,825.93</text>
					<text class="index-change decrease">-0.23%</text>
				</view>
				<view class="index-card">
					<text class="index-name">åˆ›ä¸šæ¿æŒ‡</text>
					<text class="index-value">2,156.78</text>
					<text class="index-change increase">+1.05%</text>
				</view>
			</view>
		</view>

		<!-- è‡ªåŠ¨äº¤æ˜“å¹³å° (çªå‡ºæ˜¾ç¤º) -->
		<view class="section fund-flow-section">
			<view class="section-header">
				<text class="section-title">ä¸»åŠ›èµ„é‡‘ç›‘æ§</text>
				<text class="refresh-btn" @click="refreshFundFlow">åˆ·æ–°</text>
			</view>
			<view class="fund-flow-chart">
				<!-- å®æ—¶èµ„é‡‘æµå‘å›¾è¡¨ -->
				<canvas canvas-id="fundFlowChart" class="chart-container"></canvas>
			</view>
			<view class="abnormal-signal">
				<text class="signal-label">å¼‚å¸¸ä¿¡å·ï¼š</text>
				<text class="signal-value" :class="abnormalSignalClass">{{ abnormalSignalText }}</text>
			</view>
		</view>

		<view class="section auto-trade-highlight">
			<view class="section-header">
				<text class="section-title">è‡ªåŠ¨äº¤æ˜“å¹³å°</text>
				<text class="more-btn" @click="navigateTo('/pages/auto-trader/index')">ç®¡ç†</text>
			</view>
			
			<view class="auto-trade-overview">
				<view class="trade-status-box">
					<view class="status-info">
						<text class="status-label">ç³»ç»ŸçŠ¶æ€</text>
						<text v-if="autoTradeEnabled" class="status-value status-active">
							è‡ªåŠ¨äº¤æ˜“è¿è¡Œä¸­
						</text>
						<text v-else class="status-value status-inactive">
							è‡ªåŠ¨äº¤æ˜“å·²åœæ­¢
						</text>
					</view>
					
					<view class="auto-trade-toggle">
						<text class="toggle-label">{{ autoTradeEnabled ? 'åœæ­¢' : 'å¯ç”¨' }}</text>
						<switch :checked="autoTradeEnabled" @change="toggleAutoTrading" color="#1989fa"/>
					</view>
				</view>
				
				<view class="trade-mode-selection">
					<text class="mode-title">äº¤æ˜“æ¨¡å¼</text>
					<view class="mode-options">
						<view class="mode-option" :class="{'active': tradeMode === 'CONSERVATIVE'}"
								@click="setTradeMode('CONSERVATIVE')">
							<text class="mode-icon">ğŸ›¡ï¸</text>
							<text class="mode-name">ä¿å®ˆå‹</text>
						</view>
						<view class="mode-option" :class="{'active': tradeMode === 'MODERATE'}"
								@click="setTradeMode('MODERATE')">
							<text class="mode-icon">âš–ï¸</text>
							<text class="mode-name">å¹³è¡¡å‹</text>
						</view>
						<view class="mode-option" :class="{'active': tradeMode === 'AGGRESSIVE'}"
								@click="setTradeMode('AGGRESSIVE')">
							<text class="mode-icon">ğŸš€</text>
							<text class="mode-name">æ¿€è¿›å‹</text>
						</view>
					</view>
				</view>
				
				<view class="trade-metrics">
					<view class="metric-item">
						<text class="metric-label">ä»Šæ—¥äº¤æ˜“</text>
						<text class="metric-value">{{ todayTrades }} ç¬”</text>
					</view>
					<view class="metric-item">
						<text class="metric-label">è‡ªåŠ¨äº¤æ˜“æ”¶ç›Š</text>
						<text v-if="weeklyProfit >= 0" class="metric-value profit">
							+{{ weeklyProfit }}%
						</text>
						<text v-else class="metric-value loss">
							{{ weeklyProfit }}%
						</text>
					</view>
				</view>
				
				<view class="quick-actions">
					<button class="action-btn secondary" @click="navigateTo('/pages/trade-settings/index')">äº¤æ˜“è®¾ç½®</button>
					<button class="action-btn secondary" @click="navigateTo('/pages/trade-history/index')">äº¤æ˜“å†å²</button>
				</view>
			</view>
		</view>

		<!-- Portfolio Summary Section -->
		<view class="section">
			<view class="section-header">
				<text class="section-title">æŒä»“æ¦‚è§ˆ</text>
				<text class="more-btn" @click="navigateTo('/pages/portfolio/index')">æŸ¥çœ‹è¯¦æƒ…</text>
			</view>
			<view class="portfolio-summary card">
				<view class="summary-row">
					<text>æ€»èµ„äº§</text>
					<text class="summary-value">Â¥{{ totalAssets }}</text>
				</view>
				<view class="summary-row">
					<text>æŒä»“å¸‚å€¼</text>
					<text class="summary-value">Â¥{{ stockValue }}</text>
				</view>
				<view class="summary-row">
					<text>å¯ç”¨èµ„é‡‘</text>
					<text class="summary-value">Â¥{{ availableCash }}</text>
				</view>
				<view class="summary-row">
					<text>å¯æ“ä½œé‡‘é¢</text>
					<view class="editable-amount">
						<text class="summary-value">Â¥{{ operableAmount }}</text>
						<text class="edit-btn" @click="showAmountModal">è°ƒæ•´</text>
					</view>
				</view>
				<view class="summary-row">
					<text>ä»Šæ—¥ç›ˆäº</text>
					<text v-if="todayProfit >= 0" class="summary-value profit">
						+Â¥{{ todayProfit }}
					</text>
					<text v-else class="summary-value loss">
						Â¥{{ todayProfit }}
					</text>
				</view>
				<view class="summary-row">
					<text>æ€»ç›ˆäº</text>
					<text v-if="totalProfit >= 0" class="summary-value profit">
						+Â¥{{ totalProfit }} ({{ totalProfitPercentage }}%)
					</text>
					<text v-else class="summary-value loss">
						Â¥{{ totalProfit }} ({{ totalProfitPercentage }}%)
					</text>
				</view>
			</view>
		</view>

		<!-- é«˜çº§é£æ§çœ‹æ¿ -->
		<view class="section risk-dashboard">
			<view class="section-header">
				<text class="section-title">é£æ§æŒ‡æ ‡</text>
				<text class="refresh-btn" @click="refreshRiskData">åˆ·æ–°</text>
			</view>
			<view class="risk-metrics">
				<view class="metric-card">
					<text class="metric-label">VARå€¼</text>
					<text class="metric-value" :class="varColor(riskMetrics.var)">{{ riskMetrics.var }}%</text>
				</view>
				<view class="metric-card">
					<text class="metric-label">æœ€å¤§å›æ’¤</text>
					<text class="metric-value" :class="drawdownColor(riskMetrics.maxDrawdown)">{{ riskMetrics.maxDrawdown }}%</text>
				</view>
				<view class="metric-card">
					<text class="metric-label">æ³¢åŠ¨ç‡</text>
					<text class="metric-value">{{ riskMetrics.volatility }}%</text>
				</view>
			</view>
			<view class="risk-chart">
				<canvas canvas-id="riskChart" class="chart-container"></canvas>
			</view>
		</view>

		<!-- AI Insights Section -->
		<view class="section">
			<view class="section-header">
				<text class="section-title">AI æ´å¯Ÿ</text>
				<text class="more-btn" @click="navigateTo('/pages/agent-analysis/diagnosis/index')">æŸ¥çœ‹æ›´å¤š</text>
			</view>
			<view class="ai-insights card">
				<!-- ç¡¬ç¼–ç AIæ´å¯Ÿæ•°æ® -->
				<view class="insight-item">
					<text class="insight-title">å¸‚åœºè¶‹åŠ¿åˆ†æ</text>
					<text class="insight-content">æ ¹æ®è¿‘æœŸæ•°æ®åˆ†æï¼Œå¸‚åœºæ•´ä½“å‘ˆç°éœ‡è¡ä¸Šè¡Œè¶‹åŠ¿ï¼Œå»ºè®®å…³æ³¨æ¶ˆè´¹å’Œç§‘æŠ€æ¿å—ã€‚</text>
				</view>
				<view class="insight-item">
					<text class="insight-title">æŠ•èµ„ç»„åˆä¼˜åŒ–å»ºè®®</text>
					<text class="insight-content">å½“å‰æŠ•èµ„ç»„åˆé£é™©è¾ƒé«˜ï¼Œå»ºè®®é€‚å½“å¢åŠ é˜²å¾¡æ€§æ¿å—é…ç½®ï¼Œé™ä½ç»„åˆæ³¢åŠ¨æ€§ã€‚</text>
				</view>
			</view>
		</view>

		<!-- ç­–ç•¥æ•ˆæœå¯¹æ¯” -->
		<view class="section strategy-comparison">
			<view class="section-header">
				<text class="section-title">ç­–ç•¥æ•ˆæœå¯¹æ¯”</text>
				<text class="more-btn" @click="navigateTo('/pages/strategy-analysis/comparison')">æ›´å¤š</text>
			</view>
			<view class="strategy-metrics">
				<view class="metric-card">
					<text class="metric-label">åŠ¨é‡ç­–ç•¥</text>
					<text class="metric-value">+12.5%</text>
					<progress class="metric-progress" value="75" max="100"></progress>
				</view>
				<view class="metric-card">
					<text class="metric-label">å‡å€¼å›å½’</text>
					<text class="metric-value">+8.2%</text>
					<progress class="metric-progress" value="55" max="100"></progress>
				</view>
				<view class="metric-card">
					<text class="metric-label">åŒºå—é“¾ç›‘æ§</text>
					<text class="metric-value">+15.1%</text>
					<progress class="metric-progress" value="85" max="100"></progress>
				</view>
			</view>
		</view>
	</view>
</template>

<script>
export default {
	data() {
		return {
			riskMetrics: {
				var: 2.8,
				maxDrawdown: 1.5,
				volatility: 15.2
			},
			// å¸‚åœºæ¦‚è§ˆæ•°æ®
			expandedStrategy: '',
			
			// ä¸»åŠ›èµ„é‡‘æ•°æ®
			mainFundData: {
				fundFlow: 2.45,
				patternScore: 0.72,
				volatility: 0.15,
				lastUpdate: '14:30'
			},
			
			// å¼‚å¸¸ä¿¡å·æ•°æ®
			abnormalSignalText: 'æœªæ£€æµ‹åˆ°å¼‚å¸¸',
			abnormalSignalClass: 'normal',
			
			// è‡ªåŠ¨äº¤æ˜“æ•°æ®
			autoTradeEnabled: false,
			tradeMode: 'MODERATE',
			todayTrades: 8,
			weeklyProfit: 5.2,
			riskRewardRatio: 2.5,
			chartInstance: null,
			
			// æŒä»“æ¦‚è§ˆæ•°æ®
			totalAssets: '125,680.00',
			stockValue: '98,450.00',
			availableCash: '27,230.00',
			todayProfit: 1250.80,
			totalProfit: 15680.50,
			totalProfitPercentage: 12.5,
			operableAmount: '10,000.00',
			
			// WebSocketè¿æ¥ç®¡ç†
			ws: null,
			isConnecting: false,
			reconnectAttempts: 0
		}
	},
	methods: {
		// åˆ‡æ¢ç­–ç•¥æ˜¾ç¤º
		toggleStrategy(strategyKey) {
			if (this.expandedStrategy === strategyKey) {
				this.expandedStrategy = '';
			} else {
				this.expandedStrategy = strategyKey;
			}
		},
		
		// åˆ·æ–°å¸‚åœºæ•°æ®
		refreshMarketData() {
			uni.showToast({
				title: 'æ•°æ®å·²åˆ·æ–°',
				icon: 'success'
			});
		},
		
		// åˆ·æ–°èµ„é‡‘æµå‘
		refreshFundFlow() {
			this.fetchMainFundData();
			uni.showToast({
				title: 'èµ„é‡‘æµå‘å·²åˆ·æ–°',
				icon: 'success'
			});
		},
		
		// åˆ‡æ¢è‡ªåŠ¨äº¤æ˜“çŠ¶æ€
		toggleAutoTrading(e) {
			this.autoTradeEnabled = e.detail.value;
			uni.showToast({
				title: this.autoTradeEnabled ? 'è‡ªåŠ¨äº¤æ˜“å·²å¯ç”¨' : 'è‡ªåŠ¨äº¤æ˜“å·²åœæ­¢',
				icon: 'none'
			});
		},
		
		// è®¾ç½®äº¤æ˜“æ¨¡å¼
		setTradeMode(mode) {
			this.tradeMode = mode;
			uni.showToast({
				title: 'äº¤æ˜“æ¨¡å¼å·²è®¾ç½®',
				icon: 'success'
			});
		},
		
		// é¡µé¢å¯¼èˆª
		navigateTo(url) {
			uni.navigateTo({
				url: url
			});
		},
		
		// æ–°å¢ç›‘æ§æ–¹æ³•
		fetchMainFundData() {
			// æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…åº”è°ƒç”¨API
			this.mainFundData = {
				fundFlow: Math.random() * 5 - 2.5,
				patternScore: Math.random().toFixed(2),
				volatility: (Math.random() * 0.3).toFixed(2),
				lastUpdate: new Date().toLocaleTimeString('zh-CN')
			};
			
			// æ›´æ–°å¼‚å¸¸ä¿¡å·
			if (this.mainFundData.fundFlow < -1.5) {
				this.abnormalSignalText = 'ä¸»åŠ›èµ„é‡‘å¤§å¹…æµå‡º';
				this.abnormalSignalClass = 'danger';
			} else if (this.mainFundData.fundFlow < -0.5) {
				this.abnormalSignalText = 'ä¸»åŠ›èµ„é‡‘è½»å¾®æµå‡º';
				this.abnormalSignalClass = 'warning';
			} else if (this.mainFundData.fundFlow > 1.5) {
				this.abnormalSignalText = 'ä¸»åŠ›èµ„é‡‘å¤§å¹…æµå…¥';
				this.abnormalSignalClass = 'normal';
			} else {
				this.abnormalSignalText = 'ä¸»åŠ›èµ„é‡‘æµå‘æ­£å¸¸';
				this.abnormalSignalClass = 'normal';
			}
		},
		
		initWebSocket() {
			this.isConnecting = true;
			this.ws = new WebSocket('wss://your-api-domain.com/ws');

			this.ws.onopen = () => {
				this.reconnectAttempts = 0;
				this.isConnecting = false;
			};

			this.ws.onclose = (e) => {
				if (e.code !== 1000) {
					const timeout = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 30000);
					setTimeout(() => {
						this.reconnectAttempts++;
						this.initWebSocket();
					}, timeout);
				}
			};

			this.ws.onerror = (error) => {
				console.error('WebSocket error:', error);
				this.ws.close();
			};
		},
		
		// é£é™©æŒ‡æ ‡é¢œè‰²è®¡ç®—æ–¹æ³•
		varColor(value) {
			if (value <= 2) return 'profit';
			if (value <= 4) return 'warn';
			return 'loss';
		},
		
		// æœ€å¤§å›æ’¤é¢œè‰²è®¡ç®—æ–¹æ³•
		drawdownColor(value) {
			if (value <= 1) return 'profit';
			if (value <= 3) return 'warn';
			return 'loss';
		},
		
		// åˆ·æ–°é£é™©æ•°æ®
		refreshRiskData() {
			// æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…åº”è°ƒç”¨API
			this.riskMetrics = {
				var: (Math.random() * 5).toFixed(1),
				maxDrawdown: (Math.random() * 4).toFixed(1),
				volatility: (Math.random() * 20 + 5).toFixed(1)
			};
			
			uni.showToast({
				title: 'é£æ§æŒ‡æ ‡å·²åˆ·æ–°',
				icon: 'success'
			});
		},
		
		// æ˜¾ç¤ºå¯æ“ä½œé‡‘é¢è®¾ç½®å¼¹çª—
		showAmountModal() {
			// ä½¿ç”¨å¯¼èˆªåˆ°ä¸“é—¨çš„è®¾ç½®é¡µé¢
			uni.navigateTo({
				url: `/pages/settings/amount?current=${this.operableAmount.replace(/,/g, '')}`
			});
		}
	},
	
	// ç”Ÿå‘½å‘¨æœŸé’©å­
	initRiskRewardChart() {
		this.chartInstance = uni.createCanvasContext('riskRewardChart', this);
		// åˆå§‹åŒ–å›¾è¡¨é…ç½®
	},
	updateRiskRewardChart(data) {
		// æ›´æ–°å›¾è¡¨æ•°æ®
	},
	async refreshRiskReward() {
		uni.showLoading({title: 'åŠ è½½ä¸­...'});
		try {
			const res = await uni.request({
				url: 'http://localhost:8000/risk-reward'
			});
			this.riskRewardRatio = res.data.current_ratio.toFixed(2);
			this.updateRiskRewardChart(res.data.historical);
		} catch (e) {
			uni.showToast({title: 'æ›´æ–°å¤±è´¥', icon: 'none'});
		} finally {
			uni.hideLoading();
		}
	},
	onLoad() {
		// åˆå§‹åŒ–æ•°æ®
		this.fetchMainFundData();
		
		// å°è¯•åˆå§‹åŒ–WebSocketè¿æ¥
		// this.initWebSocket();
	},
	onShow() {
		// æ£€æŸ¥æ˜¯å¦æœ‰æ–°è®¾ç½®çš„å¯æ“ä½œé‡‘é¢
		const app = getApp();
		if (app.globalData && app.globalData.operableAmount) {
			this.operableAmount = app.globalData.operableAmount;
		}
	}
}
</script>

<style>
	.container {
		padding: 20rpx;
	}
	
	.header {
		padding: 30rpx 0;
		align-items: center;
	}
	
	.main-title {
		font-size: 36rpx;
		font-weight: bold;
		margin-bottom: 10rpx;
	}
	
	.subtitle {
		font-size: 24rpx;
		color: #666;
	}
	
	.section {
		margin-bottom: 30rpx;
		background-color: #fff;
		border-radius: 12rpx;
		padding: 20rpx;
		box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.05);
	}
	
	.section-header {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 20rpx;
	}
	
	.section-title {
		font-size: 28rpx;
		font-weight: bold;
	}
	
	.refresh-btn, .more-btn {
		font-size: 24rpx;
		color: #1989fa;
	}
	
	/* å¸‚åœºæŒ‡æ•°æ ·å¼ */
	.market-indices {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
	}
	
	.index-card {
		flex: 1;
		padding: 15rpx;
		align-items: center;
	}
	
	.index-name {
		font-size: 24rpx;
		color: #666;
		margin-bottom: 10rpx;
	}
	
	.index-value {
		font-size: 32rpx;
		font-weight: bold;
		margin-bottom: 5rpx;
	}
	
	.index-change {
		font-size: 24rpx;
	}
	
	.increase {
		color: #f5222d;
	}
	
	.decrease {
		color: #52c41a;
	}
	
	/* è‡ªåŠ¨äº¤æ˜“å¹³å°æ ·å¼ */
	.auto-trade-highlight {
		border: 1rpx solid #1989fa;
		background-color: rgba(25, 137, 250, 0.05);
	}
	
	.trade-status-box {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
		align-items: center;
		padding: 20rpx;
		background-color: #f8f8f8;
		border-radius: 8rpx;
		margin-bottom: 20rpx;
	}
	
	.status-info {
		flex-direction: column;
	}
	
	.status-label {
		font-size: 24rpx;
		color: #666;
		margin-bottom: 10rpx;
	}
	
	.status-value {
		font-size: 28rpx;
		font-weight: bold;
	}
	
	.status-active {
		color: #52c41a;
	}
	
	.status-inactive {
		color: #999;
	}
	
	.auto-trade-toggle {
		display: flex;
		flex-direction: row;
		align-items: center;
	}
	
	.toggle-label {
		font-size: 24rpx;
		margin-right: 10rpx;
	}
	
	/* äº¤æ˜“æ¨¡å¼é€‰æ‹© */
	.trade-mode-selection {
		margin: 20rpx 0;
	}
	
	.mode-title {
		font-size: 26rpx;
		margin-bottom: 15rpx;
	}
	
	.mode-options {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
	}
	
	.mode-option {
		flex: 1;
		padding: 15rpx;
		align-items: center;
		background-color: #f8f8f8;
		margin: 0 5rpx;
		border-radius: 8rpx;
	}
	
	.mode-option.active {
		background-color: #e6f7ff;
		border: 1rpx solid #1989fa;
	}
	
	.mode-icon {
		font-size: 32rpx;
		margin-bottom: 10rpx;
	}
	
	.mode-name {
		font-size: 24rpx;
	}
	
	/* äº¤æ˜“æ•°æ® */
	.trade-metrics {
		display: flex;
		flex-direction: row;
		margin: 20rpx 0;
	}
	
	.metric-item {
		flex: 1;
		padding: 10rpx;
		align-items: center;
	}
	
	.metric-label {
		font-size: 24rpx;
		color: #666;
		margin-bottom: 10rpx;
	}
	
	.metric-value {
		font-size: 28rpx;
		font-weight: bold;
	}
	
	.profit {
		color: #f5222d;
	}
	
	.loss {
		color: #52c41a;
	}
	
	/* å¿«é€Ÿæ“ä½œ */
	.quick-actions {
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
	}
	
	.action-btn {
		flex: 1;
		min-width: 200rpx;
		margin: 10rpx;
		font-size: 24rpx;
		background-color: #1989fa;
		color: white;
	}
	
	.action-btn.secondary {
		background-color: #f8f8f8;
		color: #333;
		border: 1rpx solid #ddd;
	}
	
	/* æŠ•èµ„ç»„åˆæ‘˜è¦ */
	.card {
		background-color: #fff;
		border-radius: 8rpx;
		padding: 20rpx;
	}
	
	.summary-row {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
		margin-bottom: 15rpx;
		font-size: 26rpx;
	}
	
	.summary-value {
		font-weight: bold;
	}
	
	/* å¯æ“ä½œé‡‘é¢æ ·å¼ */
	.editable-amount {
		display: flex;
		flex-direction: row;
		align-items: center;
	}
	
	.edit-btn {
		margin-left: 10rpx;
		padding: 4rpx 10rpx;
		font-size: 22rpx;
		color: #1989fa;
		background-color: #e6f7ff;
		border-radius: 4rpx;
	}
	
	/* AIæ´å¯Ÿ */
	.ai-insights {
		padding: 15rpx;
	}
	
	.insight-item {
		margin-bottom: 20rpx;
	}
	
	.insight-title {
		font-size: 26rpx;
		font-weight: bold;
		margin-bottom: 10rpx;
	}
	
	.insight-content {
		font-size: 24rpx;
		color: #666;
		line-height: 1.5;
	}

	.fund-flow-section {
		background: linear-gradient(145deg, #1a237e, #0d47a1);
		border-radius: 16px;
		padding: 20px;
		margin: 20px 0;
		box-shadow: 0 4px 12px rgba(0,0,0,0.15);
	}

	.fund-flow-chart {
		height: 200px;
		margin: 15px 0;
	}

	.abnormal-signal {
		background: rgba(255,82,82,0.1);
		border-radius: 8px;
		padding: 12px;
		display: flex;
		align-items: center;
	}

	.signal-value {
		margin-left: 10px;
		font-weight: 500;
	}

	.signal-value.normal {
		color: #69f0ae;
	}

	.signal-value.warning {
		color: #ffd740;
	}

	.signal-value.danger {
		color: #ff5252;
	}

	/* WebSocketè¿æ¥çŠ¶æ€æ ·å¼ */
	.ws-status {
		display: flex;
		align-items: center;
		padding: 5px 10px;
		background-color: rgba(0,0,0,0.05);
		border-radius: 20px;
		margin: 10px 0;
	}

	.status-dot {
		width: 8px;
		height: 8px;
		border-radius: 4px;
		background-color: #4caf50;
		margin-right: 5px;
	}

	.connecting .status-dot {
		background-color: #ff9800;
		animation: blink 1s infinite;
	}

	.status-text {
		font-size: 12px;
		color: #666;
	}

	@keyframes blink {
		0% { opacity: 0.2; }
		50% { opacity: 1; }
		100% { opacity: 0.2; }
	}

	.fund-chart {
		width: 100%;
		height: 200px;
		margin: 10px 0;
	}

	.indicator-item {
		flex-direction: row;
		justify-content: space-between;
		padding: 8px 0;
	}

	.indicator-value.positive {
		color: #00b578;
	}

	.indicator-value.negative {
		color: #ff3141;
	}

	.warn {
		color: #ff8f1f;
	}
</style> 