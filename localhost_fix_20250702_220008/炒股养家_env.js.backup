/**
 * ç¯å¢ƒé…ç½®æ–‡ä»¶
 * ç”¨äºç»Ÿä¸€ç®¡ç†ä¸åŒç¯å¢ƒçš„é…ç½®
 */

// ç¯å¢ƒç±»å‹
const ENV_TYPE = {
  DEV: 'development',
  PROD: 'production'
};

// å½“å‰ç¯å¢ƒ
const currentEnv = process.env.NODE_ENV || ENV_TYPE.DEV;

// åŸºç¡€é…ç½®
const baseConfig = {
  // ç‰ˆæœ¬å·
  version: '1.0.0',
  
  // ç¼“å­˜è¿‡æœŸæ—¶é—´(æ¯«ç§’)
  cacheExpiration: 5 * 60 * 1000, // 5åˆ†é’Ÿ
  
  // WebSocketå¿ƒè·³é—´éš”(æ¯«ç§’)
  wsHeartbeatInterval: 30000, // 30ç§’
  
  // è¯·æ±‚è¶…æ—¶(æ¯«ç§’)
  requestTimeout: 30000, // 30ç§’
};

// ç¯å¢ƒç‰¹å®šé…ç½®
const envConfigs = {
  // å¼€å‘ç¯å¢ƒ
  [ENV_TYPE.DEV]: {
    // APIåŸºç¡€URL - ä½¿ç”¨å®é™…éƒ¨ç½²çš„Worker
    apiBaseUrl: 'http://localhost:8888',

    // WebSocketåœ°å€
    wsUrl: 'ws://localhost:9999/ws',
    
    // æ˜¯å¦å¯ç”¨è°ƒè¯•
    debug: true,
    
    // ğŸš¨ ç¦ç”¨æ¨¡æ‹Ÿæ•°æ® - åªå…è®¸çœŸå®æ•°æ®
    useMockData: false,
    
    // é»˜è®¤ä¸»é¢˜
    defaultTheme: 'light',
    
    // æ—¥å¿—çº§åˆ«
    logLevel: 'debug'
  },
  
  // ç”Ÿäº§ç¯å¢ƒ
  [ENV_TYPE.PROD]: {
    // APIåŸºç¡€URL - ä½¿ç”¨å®é™…éƒ¨ç½²çš„Worker
    apiBaseUrl: 'http://localhost:8888',

    // WebSocketåœ°å€
    wsUrl: 'ws://localhost:9999/ws',

    // æ˜¯å¦å¯ç”¨è°ƒè¯•
    debug: false,

    // æ˜¯å¦ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
    useMockData: false,

    // é»˜è®¤ä¸»é¢˜
    defaultTheme: 'dark',

    // æ—¥å¿—çº§åˆ«
    logLevel: 'error'
  }
};

// å¯¼å‡ºå½“å‰ç¯å¢ƒçš„é…ç½®
export default {
  ...baseConfig,
  ...envConfigs[currentEnv],
  
  // å¯¼å‡ºç¯å¢ƒç±»å‹å¸¸é‡
  ENV_TYPE,
  
  // å½“å‰ç¯å¢ƒ
  currentEnv,
  
  // æ˜¯å¦ä¸ºå¼€å‘ç¯å¢ƒ
  isDev: currentEnv === ENV_TYPE.DEV,
  
  // æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒ
  isProd: currentEnv === ENV_TYPE.PROD,
  
  // è·å–å½“å‰ç¯å¢ƒ
  get current() {
    // æ ¹æ®æ„å»ºç±»å‹åˆ¤æ–­ç¯å¢ƒ
    const isDev = process.env.NODE_ENV === 'development';
    return isDev ? envConfigs[ENV_TYPE.DEV] : envConfigs[ENV_TYPE.PROD];
  }
}; 
