# 移动应用调试指南

## 🔍 问题诊断结果

### ✅ 后端服务状态
- **API服务**: 正常运行 (端口8000)
- **Cloudflare隧道**: 正常连接
- **所有API端点**: 响应正常
- **网络连接**: https://api.aigupiao.me 可访问

### ✅ 移动应用配置
- **manifest.json**: 配置正确
- **pages.json**: 25个页面配置正确
- **env.js**: API地址配置正确
- **网络权限**: 已配置

### ❌ 编译问题
- **npm run dev:h5**: 失败 (uni-app依赖问题)
- **需要使用HBuilderX**: 推荐使用官方IDE

## 🛠️ 解决方案

### 方案1: 使用HBuilderX (推荐)
1. **打开HBuilderX**
2. **导入项目**: 文件 → 导入 → 选择 `e:\交易8\炒股养家` 目录
3. **运行项目**: 
   - 运行 → 运行到浏览器 → Chrome (测试H5版本)
   - 运行 → 运行到手机或模拟器 → 选择设备
4. **查看控制台**: 检查是否有错误信息

### 方案2: 浏览器测试
1. **打开测试页面**: `file:///e:/交易8/mobile_app_test.html`
2. **验证API连接**: 所有测试应该显示成功
3. **检查网络请求**: F12 → Network 查看请求状态

### 方案3: 手动编译
```bash
# 清理缓存
cd e:\交易8\炒股养家
rm -rf unpackage node_modules

# 重新安装依赖 (如果使用HBuilderX可跳过)
npm install

# 使用HBuilderX编译
```

## 📱 真机测试步骤

### Android设备
1. **开启开发者模式**:
   - 设置 → 关于手机 → 连续点击版本号7次
   - 设置 → 开发者选项 → 开启USB调试

2. **连接设备**:
   - USB连接手机到电脑
   - 允许USB调试授权

3. **HBuilderX运行**:
   - 运行 → 运行到手机或模拟器
   - 选择您的Android设备
   - 等待编译和安装

### iOS设备
1. **需要开发者证书**
2. **配置描述文件**
3. **使用Xcode或HBuilderX编译**

## 🔧 常见问题排查

### 问题1: 应用安装失败
- **检查**: 手机是否允许安装未知来源应用
- **解决**: 设置 → 安全 → 允许安装未知应用

### 问题2: 网络请求失败
- **检查**: 手机网络连接
- **测试**: 浏览器访问 https://api.aigupiao.me/health
- **解决**: 确保防火墙允许应用网络访问

### 问题3: 应用闪退
- **查看**: HBuilderX控制台错误日志
- **检查**: manifest.json配置
- **解决**: 重新编译项目

### 问题4: API连接超时
- **检查**: 网络环境
- **测试**: 使用浏览器测试API
- **解决**: 检查Cloudflare隧道状态

## 📊 测试清单

### 基础功能测试
- [ ] 应用启动正常
- [ ] 首页加载成功
- [ ] 网络连接状态显示
- [ ] API请求响应正常

### 交易功能测试
- [ ] 券商列表加载
- [ ] 账户信息显示
- [ ] 持仓数据获取
- [ ] 交易操作响应

### 设备功能测试
- [ ] 震动功能
- [ ] 通知推送
- [ ] 本地存储
- [ ] 网络状态检测

## 🚀 快速启动命令

```bash
# 启动后端服务
cd e:\交易8
python backend/simple_app.py

# 启动Cloudflare隧道
cloudflared tunnel --config config-new.yml run

# 或者使用一键启动脚本
start_all_services.bat
```

## 📞 获取帮助

如果问题仍然存在，请提供：

1. **HBuilderX控制台日志**
2. **手机设备信息** (型号、系统版本)
3. **具体错误信息**
4. **网络环境** (WiFi/移动网络)
5. **测试步骤** (具体操作过程)

---

**注意**: uni-app项目建议使用HBuilderX进行开发和调试，命令行编译可能存在兼容性问题。
